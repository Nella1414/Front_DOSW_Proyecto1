import{b as n}from"./index-BozS7dwg.js";import{C as y}from"./chunk-WBUKVQRU-D83Npybh.js";function E(){const t=()=>()=>{};return n.useSyncExternalStore(t,()=>!0,()=>!1)}function x(t={}){const{onLoad:s,onError:o,ignoreFallback:g,src:u,crossOrigin:a,srcSet:i,sizes:l,loading:c,shouldBypassImageLoad:m=!1}=t,d=E(),r=n.useRef(d?new Image:null),[b,f]=n.useState("pending");n.useEffect(()=>{r.current&&(r.current.onload=e=>{p(),f("loaded"),s==null||s(e)},r.current.onerror=e=>{p(),f("failed"),o==null||o(e)})},[r.current]);const p=()=>{r.current&&(r.current.onload=null,r.current.onerror=null,r.current=null)},S=n.useCallback(()=>{if(!u)return"pending";if(g||m)return"loaded";const e=new Image;return e.src=u,a&&(e.crossOrigin=a),i&&(e.srcset=i),l&&(e.sizes=l),c&&(e.loading=c),r.current=e,e.complete&&e.naturalWidth?"loaded":"loading"},[u,a,i,l,s,o,c,m]);return y(()=>{d&&f(S())},[d,S]),g?"loaded":b}export{x as u};
